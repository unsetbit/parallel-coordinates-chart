!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.parallelCoordinatesChart=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b){return d3.extent(b,function(b){return+b[a]})}a("./customEventPolyfill");var d=a("./interpolator"),e=a("./defaultColorScaleGenerator");b.exports=function(a){function b(a){l.margin("margin"in a?a.margin:[30,10,10,10]),l.width("width"in a?a.width:1560),l.height("height"in a?a.height:500),l.domain("domain"in a?a.domain:c),l.highlight("highlight"in a?a.highlight:""),l.filters("filters"in a?a.filters:{}),l.interpolator("interpolator"in a?a.interpolator:d),l.color("color"in a?a.color:e),"select"in a&&l.select(a.select)}function f(a){if(a){a.selectAll(".dimension.selected").classed("selected",!1),a.selectAll(".dimension").each(function(a){a===p&&d3.select(this).classed("selected",!0)});var b=a.selectAll("g.datalines path");if(!p)return b.style("stroke","");if(b&&b.length){var c=r(p,a.data()[0]);b.style("stroke",function(a){return c(a[p])})}}}function g(){return d3.behavior.drag().on("dragstart",function(a){z[a]=this.__origin__=x(a)}).on("drag",function(a){z[a]=Math.min(v,Math.max(0,this.__origin__+=d3.event.dx)),C.selectAll("g.datalines path").attr("d",k),t.sort(function(a,b){return j(a)-j(b)}),x.domain(t),C.selectAll("g.dimension").attr("transform",function(a){return"translate("+j(a)+")"})}).on("dragend",function(a){delete this.__origin__,delete z[a],d3.select(this).attr("transform","translate("+x(a)+")"),C.selectAll("g.datalines path").attr("d",k)})}function h(){d3.event.sourceEvent.stopPropagation()}function i(){var a=t.filter(function(a){return!y[a].brush.empty()}),b=a.map(function(a){return y[a].brush.extent()}),c=[];C.selectAll("g.datalines path").attr("class",function(d){var e=a.every(function(a,c){return b[c][0]<=d[a]&&d[a]<=b[c][1]});return e?(c.push(d),"active"):"filtered"});var d={};a.forEach(function(a,c){d[a]=b[c]});var e={element:A,selected:c,filters:d},f=new CustomEvent("changefilter",{detail:e});A.dispatchEvent(f)}function j(a){var b=z[a];return null==b?x(a):b}function k(a){return D(t.map(function(b){return[j(b),y[b](a[b])]}))}function l(a){z={},A=a.node(),B=a.datum(),t||(t=Object.keys(B[0])),x.domain(t),y={},t.forEach(function(a){y[a]=d3.scale.linear().range([w,0]).domain(s(a,B))}),C=a.selectAll("svg").data([B]).enter().append("svg").classed("parallel-coordinates-chart",!0).attr("width",n).attr("height",o);var b=C.append("g").attr("transform","translate("+m[3]+","+m[0]+")");b.append("g").classed("datalines",!0).selectAll("path").data(B).enter().append("path").attr("d",k);var c=b.selectAll(".dimension").data(t).enter().append("g").classed("dimension",!0).attr("transform",function(a){return"translate("+x(a)+")"}).call(g());return c.append("g").attr("class","axis").each(function(a){d3.select(this).call(E.scale(y[a]))}).append("text").attr("text-anchor","middle").attr("y",-9).text(String).on("click",function(a){d3.event.defaultPrevented||(a===p?a="":l.highlight(a))}),c.append("g").attr("class","brush").each(function(a){d3.select(this).call(y[a].brush=d3.svg.brush().y(y[a]).on("brushstart",h).on("brush",i))}).selectAll("rect").attr("x",-8).attr("width",16),l.highlight(p),l.filters(q),l}var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=d3.svg.axis().orient("left");return l.width=function(a){return arguments.length?(n=a,v=n-m[1]-m[3],x=d3.scale.ordinal().rangePoints([0,v],1),l):n},l.height=function(a){return arguments.length?(o=a,w=o-m[0]-m[2],l):o},l.margin=function(a){return arguments.length?(m=a,l.width(n),l.height(o),l):m},l.select=function(a){return arguments.length?(t=a,l):t},l.domain=function(a){return arguments.length?(s=a,l):s},l.color=function(a){return arguments.length?(r=a,l):r},l.interpolator=function(a){return arguments.length?(u=a,D=d3.svg.line().interpolate(u),l):u},l.highlight=function(a){return arguments.length?(p!==a&&(p=a,A&&A.dispatchEvent(new CustomEvent("changehighlight",{detail:{element:A,highlight:p}}))),f(C),l):p},l.filter=function(a,b){if(0!==arguments.length){var c=y[a].brush.extent();if(1===arguments.length){if(c[0]===c[1])return;return c}return b||(b=[0,0]),c[0]===b[0]&&c[1]===b[1]?l:(C.selectAll(" .brush").filter(function(b){return b===a}).call(y[a].brush.extent(b)).call(i),l)}},l.filters=function(a){q=a;var b={},c=Object.keys(y||[]);if(c.forEach(function(a){var c=y[a].brush.extent();c[0]!==c[1]&&(b[a]=y[a].brush.extent())}),!arguments.length)return b;var d=c.every(function(c){return c in a?c in b?b[c][0]===a[c][0]&&b[c][1]===a[c][1]:!1:!(c in b)});if(d)return l;c.forEach(function(b){b in a||(a[b]=[0,0])});var e=Object.keys(a);return C.selectAll(" .brush").filter(function(a){return~e.indexOf(a)}).each(function(b){d3.select(this).call(y[b].brush.extent(a[b]))}),C.call(i),l},l.redraw=function(a){return C&&C.remove(),l(a),l},l.draw=function(a){return l(a),l},b(a||{}),l}},{"./customEventPolyfill":2,"./defaultColorScaleGenerator":3,"./interpolator":4}],2:[function(){!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}a.prototype=window.Event.prototype,window.CustomEvent=a}()},{}],3:[function(a,b){b.exports=function(a,b){return d3.scale.linear().domain(d3.extent(b,function(b){return+b[a]})).range(["hsl(0, 60%, 50%)","hsl(255, 60%, 50%)"]).interpolate(d3.interpolateHsl)}},{}],4:[function(a,b){b.exports=function(a){for(var b,c="",d=[],e=0;e<a.length-1;e++)b=a[e],isNaN(b[1])?""!==c&&(c="M"):(d.push(c,b),c="L");return b=a[a.length-1],isNaN(b[1])||d.push(c,b),d.join("")}},{}]},{},[1])(1)});